'use strict';window.tsfem_inpost=function(a){const b=tsfem_inpostL10n.post_ID,d=tsfem_inpostL10n.nonce,e=tsfem_inpostL10n.rlt,f=tsfem_inpostL10n.isPremium,g=tsfem_inpostL10n.locale,h=tsfem_inpostL10n.debug,i=tsfem_inpostL10n.i18n,r=A=>{let B=A&&A.json||void 0,C=1===B;if(!C){let D=A;try{A=JSON.parse(A),C=!0}catch(E){C=!1,A=D}}return A};var s;const t=A=>{const B=(D,E)=>{let F=a(E),G=F.children('.tsfem-notice, .tsfem-notice-wrap .notice');1<G.length&&G.slice(0,G.length-1).each(function(){a(this).slideUp(200,function(){this.remove()})}),a(D).hide().appendTo(F).slideDown(200);let H=a('.tsfem-flex-settings-notification-area .tsfem-dismiss');const I=J=>{a(J.target).closest('.tsfem-notice').slideUp(200,function(){this.remove()})};H.off('click',I).on('click',I)},C=(D,E)=>{let F=a.Deferred(),G=E?1:0,H='';return a.ajax({method:'POST',url:ajaxurl,datatype:'json',data:{action:'tsfem_inpost_get_dismissible_notice',post_ID:b,nonce:d,'tsfem-notice-key':D,'tsfem-notice-has-msg':G},timeout:7e3,async:!0}).done(I=>{I=r(I),h&&console.log(I);let J=I&&I.data||void 0,K=I&&I.type||void 0;if(!J||!K||'undefined'==typeof J.notice);else{let L='';G?(L=a(J.notice),e?L.find('p').first().prepend(E+' '):L.find('p').first().append(' '+E)):L=J.notice,H=L}}).fail((I,J,K)=>{h&&(console.log(I.responseText),console.log(K));let L=G?wp.template('tsfem-inpost-notice-error'):wp.template('tsfem-inpost-notice-5xx'),M=L({code:D,msg:E});H=M}).always(()=>{F.resolve(H)}),F.promise()};return{in:D=>{if(A){if(s)return void setTimeout(()=>{t(A).in(D)},500);s=!0;let E=A.type||'error',F=A.code||void 0,G=A.text||'';if(void 0===F)C(-1,G).always(H=>{B(H,D),s=!1});else if(''===G)C(F,'').always(H=>{B(H,D),s=!1});else{let H=wp.template('tsfem-inpost-notice-'+E);A=H({code:F,msg:G}),B(A,D),s=!1}}}}},u=(A,B,C)=>{h&&(console.log(A.responseText),console.log(C));let D='';switch(C){case'abort':case'timeout':D=i.TimeoutError;break;case'Bad Request':D=i.BadRequest;break;case'Internal Server Error':D=i.FatalError;break;case'parsererror':D=i.ParseError;break;default:D=i.UnknownError;}return D},v=(A,B)=>{if(A instanceof NodeList)return void A.forEach(D=>v(D,B));if(A&&!(!A instanceof Element)){['edit','loading','unknown','error','bad','warning','okay','good'].forEach(D=>{A.classList.remove('tsfem-e-inpost-icon-'+D),D===B&&A.classList.add('tsfem-e-inpost-icon-'+D)})}};var w={},x={};const y=(A,B,C,D)=>{if(A&&!(!A instanceof HTMLElement)){A.style.willChange='opacity';let E=!1,F=!1;'function'==typeof C?(E=C,F=!0):'object'==typeof C&&(E='undefined'==typeof C.cb&&!1||C.cb,F='undefined'==typeof C.promise&&!0||C.promise),B=B||250,D=void 0===D||D;let J,G=0,H=0,I=10,K=A.dataset.tsfemFadeId||'_'+Math.random().toString(22).substr(2,10);A.dataset.tsfemFadeId=K,'undefined'!=typeof w[K]&&(clearInterval(w[K]),'undefined'!=typeof x[K]&&x[K].resolve()),F&&E&&(x[K]=a.Deferred(),(()=>{a.when(x[K]).done(()=>{delete x[K],E()})})(E)),D?(A.style.opacity=0,A.style.display=null,J=()=>{H=(G+=I)/100,A.style.opacity=H,1<=H&&(clearInterval(w[K]),setTimeout(()=>A.style.opacity=1,0),A.style.display=null,F?'undefined'!=typeof x[K]&&x[K].resolve():E&&E(),'none'===A.style.display&&(A.style.display=null),A.style.willChange='auto',delete A.dataset.tsfemFadeId)}):(G=100*A.style.opacity,J=()=>{H=(G-=I)/100,A.style.opacity=H,0>=H&&(clearInterval(w[K]),A.style.opacity=0,F?'undefined'!=typeof x[K]&&x[K].resolve():E&&E(),A.style.display='none',A.style.willChange='auto',delete A.dataset.tsfemFadeId)}),w[K]=setInterval(J,B*I/100)}};return a.extend(!0,{load:function(){}},{postID:b,nonce:d,isPremium:f,locale:g,debug:h,i18n:i},{escapeRegex:A=>A.replace(/[\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,'\\$&'),bewilderRegexNonWords:A=>A.replace(/[\u0020-\u002F\u003A-\u003F\u2000-\u206F\u0591-\u05C4\u05F3-\u05F4\u060C-\u061F\u0700-\u070F\u3000-\u3030\u005B-\u0060\u007B-\u007E]+/g,'\\W+'),normalizeSpacing:A=>A.replace(/(?!(\n+|\r)+)(&nbsp;|\s)+/gu,' '),escapeStr:(A,B)=>{return A.length?B?A.replace(/[&<>]/g,C=>{return{'&':'&amp;','<':'&lt;','>':'&gt;'}[C]}):A.replace(/[&<>"']/g,C=>{return{'&':'&amp;','<':'&lt;','>':'&gt;','"':'&quot;','\'':'&#039;'}[C]}):''},isActionableElement:A=>{return!(!A instanceof HTMLElement)&&(A instanceof HTMLInputElement||A instanceof HTMLSelectElement||A instanceof HTMLLabelElement||A instanceof HTMLButtonElement||A instanceof HTMLTextAreaElement)},promiseLoop:(A,B,C)=>{let D=a.Deferred(),E=A.length;if(!E)return D.resolve();const F=G=>{setTimeout(()=>{a.when(B(A[G])).done(()=>{++G===E?D.resolve():F(G)})},C)};return F(0),D.promise()},doAjax:(A,B,C)=>{let D,E=C.noticeArea,F=C.premium||!1;return F&&!f?void A.reject():void(h&&console.log(B),a.ajax(B).done(G=>{A.notify(),G=r(G),h&&console.log(G);let H=G&&G.data||void 0,I=G&&G.type||void 0;if(!H||!I)return A.reject(),void(D={type:'error',code:-1,text:i.InvalidResponse});let J=H.results&&H.results.code||void 0,K=H.results&&H.results.notice||void 0,L=H.results&&H.results.type||void 0;J&&L&&(D={type:L,code:J,text:K}),'success'===I&&'data'in H?A.resolve(H.data):A.reject(J)}).fail((G,H,I)=>{A.reject(),h&&(console.log(G.responseText),console.log(I)),D={type:'error',code:-1,text:u(G,H,I)}}).always(()=>{A.notify(),D&&t(D).in(E)}))},convertJSONResponse:r,setFlexNotice:t,getAjaxError:u,setIconClass:v,fadeOut:(A,B,C)=>{y(A,B,C,!1)},fadeIn:y})}(jQuery),jQuery(window.tsfem_inpost.load);
