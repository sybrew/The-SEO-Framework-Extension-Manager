'use strict';window.tsfem_manager=function(){const a=tsfemManagerL10n.i18n,b=b=>{let d="tsfem-button-disabled",e=b.target;if(e.disabled||e.classList.contains(d))return;let f=e.dataset.slug,g=e.dataset.case,h="#tsfem-extensions-ajax",i=0,j="",k=0,l="",m=tsfem.getNodeArray(".tsfem-button-extension-activate, .tsfem-button-extension-deactivate",d);m.forEach(a=>{a.classList.add(d),a.disabled=!0}),tsfem.resetAjaxLoader(h),tsfem.setAjaxLoader(h),wp.ajax.send("tsfem_update_extension",{data:{nonce:tsfem.nonce,slug:f,case:g},dataType:"json",timeout:1e4}).done(b=>{b=tsf.convertJSONResponse(b),tsf.l10n.states.debug&&void 0;let d=b?.data,h=b?.type;if(!d||!h)l=tsfem.i18n.UnknownError;else{let b=d?.results?.code;if(l=d?.results?.notice,"activate"===g)switch(b){case 10001:case 10002:case 10003:case 10004:case 10006:case 10007:case 10013:case 10014:case 10015:i=0,k=b;break;case 10005:i=0,j=d?.fatal_error,k=b;break;case 10008:case 10010:case 10012:i=1,e.classList.remove("tsfem-button","tsfem-button-extension-activate"),e.classList.add("tsfem-button-primary","tsfem-button-primary-dark","tsfem-button-extension-deactivate"),e.dataset.case="deactivate",e.innerText=a.Deactivate;let h=document.getElementById(`${f}-extension-entry`);h&&(h.classList.remove("tsfem-extension-deactivated"),h.classList.add("tsfem-extension-activated")),c(f,g);break;case 10009:i=2,k=b;break;default:i=0,l=tsfem.i18n.UnknownError;}else if("deactivate"===g)switch(b){case 11001:i=1,e.classList.remove("tsfem-button-primary","tsfem-button-primary-dark","tsfem-button-extension-deactivate"),e.classList.add("tsfem-button","tsfem-button-extension-activate"),e.dataset.case="activate",e.innerText=a.Activate;let d=document.getElementById(`${f}-extension-entry`);d&&(d.classList.add("tsfem-extension-deactivated"),d.classList.remove("tsfem-extension-activated")),c(f,g);break;case 11002:case 11003:case 11004:i=0,k=b;break;default:i=0,l=tsfem.i18n.UnknownError;}}}).fail((a,b,c)=>{l=tsfem.getAjaxError(a,b,c),tsfem_ui.setTopNotice(1071100),c&&tsfem_ui.setTopNotice(-1,`Thrown error: ${c}`)}).always(()=>{tsfem.updatedResponse(h,i,l),m.forEach(a=>{a.classList.remove(d),a.disabled=!1}),e.focus(),k&&tsfem_ui.setTopNotice(k,j)})},c=(a,b)=>{wp.ajax.send("tsfem_update_extension",{data:{nonce:tsfem.nonce,slug:a,case:b},dataType:"json",timeout:7e3}).done(c=>{c=tsf.convertJSONResponse(c),tsf.l10n.states.debug&&void 0;let d=c?.data,e=c?.type;if(!d||!e)return;const f=document.querySelector(`#${a}-extension-entry .tsfem-extension-description-footer`),g="activate"===b?"up":"down";f.classList.add(`tsfem-flip-hide-${g}`),setTimeout(()=>{f.innerHTML="",f.insertAdjacentHTML("beforeend",content),tsfTT.triggerReset()},250),setTimeout(()=>{f.classList.add(`tsfem-flip-show-${g}`)},500),setTimeout(()=>{f.classList.remove(`tsfem-flip-hide-${g}`,`tsfem-flip-show-${g}`)},750)}).fail(()=>{tsf.l10n.states.debug&&(void 0,void 0)})},d=()=>{document.querySelectorAll(".tsfem-button-extension-activate, .tsfem-button-extension-deactivate").forEach(a=>{a.addEventListener("click",b)})};return Object.assign({load:()=>{document.body.addEventListener("tsf-ready",d)}},{i18n:a},{})}(),window.tsfem_manager.load();
