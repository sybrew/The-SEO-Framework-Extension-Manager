'use strict';window.tsfem_e_local={nonce:tsfem_e_localL10n.nonce,i18n:tsfem_e_localL10n.i18n,validateFormJson:a=>{let b,c,d=a.target.getAttribute("form");if(d){if(b=document.getElementById(d),!b)return!1;if(!tsfemForm.doValidityRoutine(b,tsfem_e_local.i18n.fixForm))return!1;c=a.target}else return!1;let e=jQuery(b).closest(".tsfem-pane-wrap").find(".tsfem-pane-header .tsfem-ajax"),f=0,g="";tsfemForm.disableButton(c),tsfem.resetAjaxLoader(e),tsfem.setAjaxLoader(e);let h=window,i="_tsfemMarkupTester",j=window.open("about:blank",i);return jQuery.ajax({method:"POST",url:ajaxurl,dataType:"json",data:{action:"tsfem_e_local_validateFormJson",nonce:tsfem_e_local.nonce,data:jQuery(b).serialize()},processData:!0,timeout:14e3,async:!0}).done(a=>{a=tsf.convertJSONResponse(a),tsf.l10n.states.debug&&void 0;let b=a&&a.data||void 0,c=a&&a.type||void 0;if(!b||!c)g=tsfem.i18n.InvalidResponse;else{let a=b.results&&b.results.code||void 0,c=b.results&&b.results.success||void 0;if(!a)g=tsfem.i18n.UnknownError,j.close(),h.focus();else if(!c)tsfem_ui.setTopNotice(a),j.close(),h.focus();else{let a=b.tdata||void 0;if(f=1,g=tsfem_e_local.i18n.testNewWindow,a){let b=jQuery("<form>",{action:"https://search.google.com/test/rich-results?utm_medium=jsonld",method:"post",target:i});jQuery("<textarea>").attr("name","code_snippet").css("display","none").text(a).appendTo(b),b.appendTo("body").submit(),b.remove(),j.focus()}}}}).fail((a,b,c)=>{j.close(),h.focus(),g=tsfem.getAjaxError(a,b,c),tsfem_ui.setTopNotice(1072100),c&&tsfem_ui.setTopNotice(-1,"Thrown error: "+c)}).always(()=>{tsfem.updatedResponse(e,f,g),tsfemForm.enableButton(c)}),!0},ready:a=>{a("button[name=\"tsfem-e-local-validateFormJson\"]").on("click",tsfem_e_local.validateFormJson)}},jQuery(tsfem_e_local.ready);
